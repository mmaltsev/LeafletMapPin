function markerOutliner(e,t=50,o=82,r="pin"){var l,{pinColor:n,pinColorDark:i}=colorExtractor(e);return"pin"===r?l=pinMaker(n,i,t,o):"house"===r?l=houseMaker(n,i,t,o):console.log("Unknown type of marker!"),l.toDataURL("image/png")}function colorExtractor(e){var t=document.createElement("div");t.style.color=e,document.body.appendChild(t);var o=window.getComputedStyle(t).color;document.body.removeChild(t);return{pinColor:o,pinColorDark:colorDarkening(o)}}function colorDarkening(e){var t=e.substring(4,e.length-1).split(",").map(e=>parseInt(e,10)),[o,r,l]=t.map(e=>e>=60?e-60:e);return"rgb("+o+", "+r+", "+l+")"}function pinMaker(e,t,o,r){var l=document.createElement("canvas");l.setAttribute("id","pin"),l.setAttribute("width",""+o),l.setAttribute("height",""+r);var n={x:o/2,y:r,pinColor:e,arcColor:"white",strokeColor:t},{pls:i,prs:c,arc:s}=setCoordinates(o,r),a=l.getContext("2d");return a.save(),a.translate(n.x,n.y),a.beginPath(),a.moveTo(0,0),a.bezierCurveTo(i.cp1x,i.cp1y,i.cp2x,i.cp2y,i.x,i.y),a.bezierCurveTo(c.cp1x,c.cp1y,c.cp2x,c.cp2y,c.x,c.y),a.fillStyle=n.pinColor,a.fill(),a.strokeStyle=n.strokeColor,a.lineWidth=2,a.stroke(),a.beginPath(),a.arc(s.x,s.y,s.r,s.sAngle,s.eAngle),a.closePath(),a.fillStyle=n.arcColor,a.fill(),a.strokeStyle=n.strokeColor,a.lineWidth=2,a.stroke(),a.restore(),l}function setCoordinates(e,t){var o={};o.cp1x=0,o.cp1y=-5,o.cp2x=-e,o.cp2y=-(t-2),o.x=0,o.y=-(t-2);var r={};r.cp1x=e,r.cp1y=-(t-2),r.cp2x=0,r.cp2y=-5,r.x=0,r.y=0;var l={};return l.x=0,l.y=-.67*t,l.r=t/9,l.sAngle=0,l.eAngle=2*Math.PI,{pls:o,prs:r,arc:l}}function houseMaker(e,t,o,r){var l=document.createElement("canvas");l.setAttribute("id","house"),l.setAttribute("width",""+o),l.setAttribute("height",""+r);var n={x:o,y:r,pinColor:e,arcColor:"white",strokeColor:t},i=.4*r,c=.36*o,s=.64*o,a=.68*r,p=l.getContext("2d");return p.save(),p.moveTo(1,i),p.lineTo(o-1,i),p.lineTo(o-1,r-1),p.lineTo(1,r-1),p.lineTo(1,i),p.lineTo(o/2,1),p.lineTo(o-1,i),p.moveTo(c,r-1),p.lineTo(c,a),p.lineTo(s,a),p.lineTo(s,r-1),p.closePath(),p.fillStyle=n.pinColor,p.fill(),p.strokeStyle=n.strokeColor,p.lineWidth=2,p.stroke(),p.restore(),l}